[platformio]
default_envs = firebeetle2-esp32c6

; ========= Basis-Environment =========
[env:firebeetle2-esp32c6]
; Community-Plattform mit Arduino 3.x (IDF 5.x) – nötig für ESP32-C6
platform  = https://github.com/pioarduino/platform-espressif32/releases/download/54.03.20/platform-espressif32.zip
board     = esp32-c6-devkitm-1
framework = arduino, espidf

; Build / Toolchain
build_type = release
board_build.partitions = partitions.csv
board_build.cmake_extra_args = -DSDKCONFIG_DEFAULTS="sdkconfig.defaults"

; Serielle Ausgabe / Upload
monitor_speed  = 115200
upload_speed   = 921600
; upload_port = COM3            ; setze bei Bedarf konkret, statt Platzhalter

; Arduino-/Logging-Makros
build_flags =
    -D ARDUINO_USB_CDC_ON_BOOT=1
    -D ARDUINO_USB_MODE=1
    -D CORE_DEBUG_LEVEL=3

; Libs (BME280 etc.)
lib_deps =
    adafruit/Adafruit BME280 Library@^2.2.4
    adafruit/Adafruit Unified Sensor@^1.1.14
    Wire
    SPI

monitor_filters = esp32_exception_decoder, time, colorize
debug_tool = esp-builtin
debug_init_break = tbreak setup

; ========= OTA-Variante =========
[env:firebeetle2-esp32c6-ota]
extends = env:firebeetle2-esp32c6
upload_protocol = espota
upload_port     = 192.168.1.100      ; anpassen
upload_flags =
    --port=3232
    --auth=password

; ========= Debug-Variante (kein Deep Sleep, mehr Logs) =========
[env:firebeetle2-esp32c6-debug]
extends = env:firebeetle2-esp32c6
build_flags =
    ${env:firebeetle2-esp32c6.build_flags}
    -D ENABLE_DEEP_SLEEP=0
    -D ENABLE_WIFI=1
    -D ENABLE_WEBSERVER=1
    -D CORE_DEBUG_LEVEL=5

; ========= Production (sparsame Logs) =========
[env:firebeetle2-esp32c6-production]
extends = env:firebeetle2-esp32c6
build_flags =
    ${env:firebeetle2-esp32c6.build_flags}
    -D ENABLE_DEEP_SLEEP=1
    -D ENABLE_WIFI=0
    -D ENABLE_WEBSERVER=0
    -D CORE_DEBUG_LEVEL=1
